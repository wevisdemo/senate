import{r as l,d as T}from"./q-68942e05.js";import{e as he,u as C,s as M,L as G,D as W,l as te,j as Q,y as _,T as De,o as w,c as Te,d as N,I as J,a as Be,C as re,b as V,r as xe,w as U,f as $e,g as He,h as Ge}from"./q-b7f31249.js";function je(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Y(){let e=[],t={addEventListener(r,n,s,u){return r.addEventListener(n,s,u),t.add(()=>r.removeEventListener(n,s,u))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return je(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,s){let u=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:s}),this.add(()=>{Object.assign(r.style,{[n]:u})})},group(r){let n=Y();return r(n),this.add(()=>n.dispose())},add(r){return e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let s of e.splice(n,1))s()}},dispose(){for(let r of e.splice(0))r()}};return t}function Ie(){let[e]=l.useState(Y);return l.useEffect(()=>()=>e.dispose(),[e]),e}let ve=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var B=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(B||{}),Z=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Z||{}),qe=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(qe||{});function ne(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ve)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var Ee=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Ee||{});function Ce(e,t=0){var r;return e===((r=he(e))==null?void 0:r.body)?!1:C(t,{[0](){return e.matches(ve)},[1](){let n=e;for(;n!==null;){if(n.matches(ve))return!0;n=n.parentElement}return!1}})}let Ue=["textarea","input"].join(",");function _e(e){var t,r;return(r=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,Ue))!=null?r:!1}function We(e,t=r=>r){return e.slice().sort((r,n)=>{let s=t(r),u=t(n);if(s===null||u===null)return 0;let o=s.compareDocumentPosition(u);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function X(e,t,{sorted:r=!0,relativeTo:n=null,skipElements:s=[]}={}){let u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?r?We(e):e:ne(e);s.length>0&&o.length>1&&(o=o.filter(P=>!s.includes(P))),n=n??u.activeElement;let c=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(n))-1;if(t&4)return Math.max(0,o.indexOf(n))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),f=t&32?{preventScroll:!0}:{},d=0,m=o.length,p;do{if(d>=m||d+m<=0)return 0;let P=a+d;if(t&16)P=(P+m)%m;else{if(P<0)return 3;if(P>=m)return 1}p=o[P],p==null||p.focus(f),d+=c}while(p!==u.activeElement);return t&6&&_e(p)&&p.select(),p.hasAttribute("tabindex")||p.setAttribute("tabindex","0"),2}function de(e,t,r){let n=M(t);l.useEffect(()=>{function s(u){n.current(u)}return document.addEventListener(e,s,r),()=>document.removeEventListener(e,s,r)},[e,r])}function Ke(e,t,r=!0){let n=l.useRef(!1);l.useEffect(()=>{requestAnimationFrame(()=>{n.current=r})},[r]);function s(o,c){if(!n.current||o.defaultPrevented)return;let a=function d(m){return typeof m=="function"?d(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e),f=c(o);if(f!==null&&f.getRootNode().contains(f)){for(let d of a){if(d===null)continue;let m=d instanceof HTMLElement?d:d.current;if(m!=null&&m.contains(f)||o.composed&&o.composedPath().includes(m))return}return!Ce(f,Ee.Loose)&&f.tabIndex!==-1&&o.preventDefault(),t(o,f)}}let u=l.useRef(null);de("mousedown",o=>{var c,a;n.current&&(u.current=((a=(c=o.composedPath)==null?void 0:c.call(o))==null?void 0:a[0])||o.target)},!0),de("click",o=>{u.current&&(s(o,()=>u.current),u.current=null)},!0),de("blur",o=>s(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}let Ve="div";var ee=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ee||{});function Xe(e,t){let{features:r=1,...n}=e,s={ref:t,"aria-hidden":(r&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return W({ourProps:s,theirProps:n,slot:{},defaultTag:Ve,name:"Hidden"})}let me=G(Xe);function ze(e,t,r){let n=M(t);l.useEffect(()=>{function s(u){n.current(u)}return window.addEventListener(e,s,r),()=>window.removeEventListener(e,s,r)},[e,r])}var H=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(H||{});function Le(){let e=l.useRef(0);return ze("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function Oe(){let e=l.useRef(!1);return te(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function ge(...e){return l.useMemo(()=>he(...e),[...e])}function Je(e,t,r,n){let s=M(r);l.useEffect(()=>{e=e??window;function u(o){s.current(o)}return e.addEventListener(t,u,n),()=>e.removeEventListener(t,u,n)},[e,t,n])}var Qe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Qe||{}),Ye=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Ye||{});let Ze={[0]:e=>({...e,popoverState:C(e.popoverState,{[0]:1,[1]:0})}),[1](e){return e.popoverState===1?e:{...e,popoverState:1}},[2](e,t){return e.button===t.button?e:{...e,button:t.button}},[3](e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},[4](e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},[5](e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},Pe=l.createContext(null);Pe.displayName="PopoverContext";function oe(e){let t=l.useContext(Pe);if(t===null){let r=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,oe),r}return t}let Se=l.createContext(null);Se.displayName="PopoverAPIContext";function ye(e){let t=l.useContext(Se);if(t===null){let r=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,ye),r}return t}let Fe=l.createContext(null);Fe.displayName="PopoverGroupContext";function Ne(){return l.useContext(Fe)}let le=l.createContext(null);le.displayName="PopoverPanelContext";function et(){return l.useContext(le)}function tt(e,t){return C(t.type,Ze,e,t)}let rt="div";function nt(e,t){var r;let n=l.useRef(null),s=_(t,De(v=>{n.current=v})),u=l.useRef([]),o=l.useReducer(tt,{popoverState:1,buttons:u,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:l.createRef(),afterPanelSentinel:l.createRef()}),[{popoverState:c,button:a,buttonId:f,panel:d,panelId:m,beforePanelSentinel:p,afterPanelSentinel:P},i]=o,b=ge((r=n.current)!=null?r:a),E=l.useMemo(()=>{if(!a||!d)return!1;for(let D of document.querySelectorAll("body > *"))if(Number(D==null?void 0:D.contains(a))^Number(D==null?void 0:D.contains(d)))return!0;let v=ne(),g=v.indexOf(a),k=(g+v.length-1)%v.length,O=(g+1)%v.length,z=v[k],se=v[O];return!d.contains(z)&&!d.contains(se)},[a,d]),y=M(f),x=M(m),A=l.useMemo(()=>({buttonId:y,panelId:x,close:()=>i({type:1})}),[y,x,i]),$=Ne(),R=$==null?void 0:$.registerPopover,j=w(()=>{var v;return(v=$==null?void 0:$.isFocusWithinPopoverGroup())!=null?v:(b==null?void 0:b.activeElement)&&((a==null?void 0:a.contains(b.activeElement))||(d==null?void 0:d.contains(b.activeElement)))});l.useEffect(()=>R==null?void 0:R(A),[R,A]),Je(b==null?void 0:b.defaultView,"focus",v=>{var g,k,O,z;c===0&&(j()||a&&d&&v.target!==window&&((k=(g=p.current)==null?void 0:g.contains)!=null&&k.call(g,v.target)||(z=(O=P.current)==null?void 0:O.contains)!=null&&z.call(O,v.target)||i({type:1})))},!0),Ke([a,d],(v,g)=>{i({type:1}),Ce(g,Ee.Loose)||(v.preventDefault(),a==null||a.focus())},c===0);let S=w(v=>{i({type:1});let g=(()=>v?v instanceof HTMLElement?v:"current"in v&&v.current instanceof HTMLElement?v.current:a:a)();g==null||g.focus()}),I=l.useMemo(()=>({close:S,isPortalled:E}),[S,E]),F=l.useMemo(()=>({open:c===0,close:S}),[c,S]),L=e,h={ref:s};return T.createElement(le.Provider,{value:null},T.createElement(Pe.Provider,{value:o},T.createElement(Se.Provider,{value:I},T.createElement(Te,{value:C(c,{[0]:N.Open,[1]:N.Closed})},W({ourProps:h,theirProps:L,slot:F,defaultTag:rt,name:"Popover"})))))}let ot="button";function lt(e,t){let r=J(),{id:n=`headlessui-popover-button-${r}`,...s}=e,[u,o]=oe("Popover.Button"),{isPortalled:c}=ye("Popover.Button"),a=l.useRef(null),f=`headlessui-focus-sentinel-${J()}`,d=Ne(),m=d==null?void 0:d.closeOthers,p=et()!==null;l.useEffect(()=>{if(!p)return o({type:3,buttonId:n}),()=>{o({type:3,buttonId:null})}},[p,n,o]);let[P]=l.useState(()=>Symbol()),i=_(a,t,p?null:h=>{if(h)u.buttons.current.push(P);else{let v=u.buttons.current.indexOf(P);v!==-1&&u.buttons.current.splice(v,1)}u.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),h&&o({type:2,button:h})}),b=_(a,t),E=ge(a),y=w(h=>{var v,g,k;if(p){if(u.popoverState===1)return;switch(h.key){case V.Space:case V.Enter:h.preventDefault(),(g=(v=h.target).click)==null||g.call(v),o({type:1}),(k=u.button)==null||k.focus();break}}else switch(h.key){case V.Space:case V.Enter:h.preventDefault(),h.stopPropagation(),u.popoverState===1&&(m==null||m(u.buttonId)),o({type:0});break;case V.Escape:if(u.popoverState!==0)return m==null?void 0:m(u.buttonId);if(!a.current||E!=null&&E.activeElement&&!a.current.contains(E.activeElement))return;h.preventDefault(),h.stopPropagation(),o({type:1});break}}),x=w(h=>{p||h.key===V.Space&&h.preventDefault()}),A=w(h=>{var v,g;xe(h.currentTarget)||e.disabled||(p?(o({type:1}),(v=u.button)==null||v.focus()):(h.preventDefault(),h.stopPropagation(),u.popoverState===1&&(m==null||m(u.buttonId)),o({type:0}),(g=u.button)==null||g.focus()))}),$=w(h=>{h.preventDefault(),h.stopPropagation()}),R=u.popoverState===0,j=l.useMemo(()=>({open:R}),[R]),S=Be(e,a),I=p?{ref:b,type:S,onKeyDown:y,onClick:A}:{ref:i,id:u.buttonId,type:S,"aria-expanded":e.disabled?void 0:u.popoverState===0,"aria-controls":u.panel?u.panelId:void 0,onKeyDown:y,onKeyUp:x,onClick:A,onMouseDown:$},F=Le(),L=w(()=>{let h=u.panel;if(!h)return;function v(){C(F.current,{[H.Forwards]:()=>X(h,B.First),[H.Backwards]:()=>X(h,B.Last)})===Z.Error&&X(ne().filter(g=>g.dataset.headlessuiFocusGuard!=="true"),C(F.current,{[H.Forwards]:B.Next,[H.Backwards]:B.Previous}),{relativeTo:u.button})}v()});return T.createElement(T.Fragment,null,W({ourProps:I,theirProps:s,slot:j,defaultTag:ot,name:"Popover.Button"}),R&&!p&&c&&T.createElement(me,{id:f,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:L}))}let ut="div",at=Q.RenderStrategy|Q.Static;function it(e,t){let r=J(),{id:n=`headlessui-popover-overlay-${r}`,...s}=e,[{popoverState:u},o]=oe("Popover.Overlay"),c=_(t),a=re(),f=(()=>a!==null?(a&N.Open)===N.Open:u===0)(),d=w(p=>{if(xe(p.currentTarget))return p.preventDefault();o({type:1})}),m=l.useMemo(()=>({open:u===0}),[u]);return W({ourProps:{ref:c,id:n,"aria-hidden":!0,onClick:d},theirProps:s,slot:m,defaultTag:ut,features:at,visible:f,name:"Popover.Overlay"})}let st="div",ct=Q.RenderStrategy|Q.Static;function dt(e,t){let r=J(),{id:n=`headlessui-popover-panel-${r}`,focus:s=!1,...u}=e,[o,c]=oe("Popover.Panel"),{close:a,isPortalled:f}=ye("Popover.Panel"),d=`headlessui-focus-sentinel-before-${J()}`,m=`headlessui-focus-sentinel-after-${J()}`,p=l.useRef(null),P=_(p,t,S=>{c({type:4,panel:S})}),i=ge(p);te(()=>(c({type:5,panelId:n}),()=>{c({type:5,panelId:null})}),[n,c]);let b=re(),E=(()=>b!==null?(b&N.Open)===N.Open:o.popoverState===0)(),y=w(S=>{var I;switch(S.key){case V.Escape:if(o.popoverState!==0||!p.current||i!=null&&i.activeElement&&!p.current.contains(i.activeElement))return;S.preventDefault(),S.stopPropagation(),c({type:1}),(I=o.button)==null||I.focus();break}});l.useEffect(()=>{var S;e.static||o.popoverState===1&&((S=e.unmount)==null||S)&&c({type:4,panel:null})},[o.popoverState,e.unmount,e.static,c]),l.useEffect(()=>{if(!s||o.popoverState!==0||!p.current)return;let S=i==null?void 0:i.activeElement;p.current.contains(S)||X(p.current,B.First)},[s,p,o.popoverState]);let x=l.useMemo(()=>({open:o.popoverState===0,close:a}),[o,a]),A={ref:P,id:n,onKeyDown:y,onBlur:s&&o.popoverState===0?S=>{var I,F,L,h,v;let g=S.relatedTarget;g&&p.current&&((I=p.current)!=null&&I.contains(g)||(c({type:1}),((L=(F=o.beforePanelSentinel.current)==null?void 0:F.contains)!=null&&L.call(F,g)||(v=(h=o.afterPanelSentinel.current)==null?void 0:h.contains)!=null&&v.call(h,g))&&g.focus({preventScroll:!0})))}:void 0,tabIndex:-1},$=Le(),R=w(()=>{let S=p.current;if(!S)return;function I(){C($.current,{[H.Forwards]:()=>{var F;X(S,B.First)===Z.Error&&((F=o.afterPanelSentinel.current)==null||F.focus())},[H.Backwards]:()=>{var F;(F=o.button)==null||F.focus({preventScroll:!0})}})}I()}),j=w(()=>{let S=p.current;if(!S)return;function I(){C($.current,{[H.Forwards]:()=>{var F;if(!o.button)return;let L=ne(),h=L.indexOf(o.button),v=L.slice(0,h+1),g=[...L.slice(h+1),...v];for(let k of g.slice())if(k.dataset.headlessuiFocusGuard==="true"||(F=o.panel)!=null&&F.contains(k)){let O=g.indexOf(k);O!==-1&&g.splice(O,1)}X(g,B.First,{sorted:!1})},[H.Backwards]:()=>{var F;X(S,B.Previous)===Z.Error&&((F=o.button)==null||F.focus())}})}I()});return T.createElement(le.Provider,{value:n},E&&f&&T.createElement(me,{id:d,ref:o.beforePanelSentinel,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:R}),W({ourProps:A,theirProps:u,slot:x,defaultTag:st,features:ct,visible:E,name:"Popover.Panel"}),E&&f&&T.createElement(me,{id:m,ref:o.afterPanelSentinel,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:j}))}let ft="div";function pt(e,t){let r=l.useRef(null),n=_(r,t),[s,u]=l.useState([]),o=w(i=>{u(b=>{let E=b.indexOf(i);if(E!==-1){let y=b.slice();return y.splice(E,1),y}return b})}),c=w(i=>(u(b=>[...b,i]),()=>o(i))),a=w(()=>{var i;let b=he(r);if(!b)return!1;let E=b.activeElement;return(i=r.current)!=null&&i.contains(E)?!0:s.some(y=>{var x,A;return((x=b.getElementById(y.buttonId.current))==null?void 0:x.contains(E))||((A=b.getElementById(y.panelId.current))==null?void 0:A.contains(E))})}),f=w(i=>{for(let b of s)b.buttonId.current!==i&&b.close()}),d=l.useMemo(()=>({registerPopover:c,unregisterPopover:o,isFocusWithinPopoverGroup:a,closeOthers:f}),[c,o,a,f]),m=l.useMemo(()=>({}),[]),p=e,P={ref:n};return T.createElement(Fe.Provider,{value:d},W({ourProps:P,theirProps:p,slot:m,defaultTag:ft,name:"Popover.Group"}))}let vt=G(nt),mt=G(lt),bt=G(it),ht=G(dt),Et=G(pt),Dt=Object.assign(vt,{Button:mt,Overlay:bt,Panel:ht,Group:Et});function gt(e=0){let[t,r]=l.useState(e),n=l.useCallback(c=>r(a=>a|c),[t]),s=l.useCallback(c=>!!(t&c),[t]),u=l.useCallback(c=>r(a=>a&~c),[r]),o=l.useCallback(c=>r(a=>a^c),[r]);return{flags:t,addFlag:n,hasFlag:s,removeFlag:u,toggleFlag:o}}function Pt(e){let t={called:!1};return(...r)=>{if(!t.called)return t.called=!0,e(...r)}}function fe(e,...t){e&&t.length>0&&e.classList.add(...t)}function pe(e,...t){e&&t.length>0&&e.classList.remove(...t)}function St(e,t){let r=Y();if(!e)return r.dispose;let{transitionDuration:n,transitionDelay:s}=getComputedStyle(e),[u,o]=[n,s].map(a=>{let[f=0]=a.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,m)=>m-d);return f}),c=u+o;if(c!==0){r.group(f=>{f.setTimeout(()=>{t(),f.dispose()},c),f.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&f.dispose()})});let a=r.addEventListener(e,"transitionend",f=>{f.target===f.currentTarget&&(t(),a())})}else t();return r.add(()=>t()),r.dispose}function yt(e,t,r,n){let s=r?"enter":"leave",u=Y(),o=n!==void 0?Pt(n):()=>{};s==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let c=C(s,{enter:()=>t.enter,leave:()=>t.leave}),a=C(s,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),f=C(s,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return pe(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),fe(e,...c,...f),u.nextFrame(()=>{pe(e,...f),fe(e,...a),St(e,()=>(pe(e,...c),fe(e,...t.entered),o()))}),u.dispose}function Ft({container:e,direction:t,classes:r,onStart:n,onStop:s}){let u=Oe(),o=Ie(),c=M(t);te(()=>{let a=Y();o.add(a.dispose);let f=e.current;if(f&&c.current!=="idle"&&u.current)return a.dispose(),n.current(c.current),a.add(yt(f,r.current,c.current==="enter",()=>{a.dispose(),s.current(c.current)})),a.dispose},[t])}function K(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let ue=l.createContext(null);ue.displayName="TransitionContext";var wt=(e=>(e.Visible="visible",e.Hidden="hidden",e))(wt||{});function Tt(){let e=l.useContext(ue);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function xt(){let e=l.useContext(ae);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let ae=l.createContext(null);ae.displayName="NestingContext";function ie(e){return"children"in e?ie(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function Re(e,t){let r=M(e),n=l.useRef([]),s=Oe(),u=Ie(),o=w((P,i=U.Hidden)=>{let b=n.current.findIndex(({el:E})=>E===P);b!==-1&&(C(i,{[U.Unmount](){n.current.splice(b,1)},[U.Hidden](){n.current[b].state="hidden"}}),u.microTask(()=>{var E;!ie(n)&&s.current&&((E=r.current)==null||E.call(r))}))}),c=w(P=>{let i=n.current.find(({el:b})=>b===P);return i?i.state!=="visible"&&(i.state="visible"):n.current.push({el:P,state:"visible"}),()=>o(P,U.Unmount)}),a=l.useRef([]),f=l.useRef(Promise.resolve()),d=l.useRef({enter:[],leave:[],idle:[]}),m=w((P,i,b)=>{a.current.splice(0),t&&(t.chains.current[i]=t.chains.current[i].filter(([E])=>E!==P)),t==null||t.chains.current[i].push([P,new Promise(E=>{a.current.push(E)})]),t==null||t.chains.current[i].push([P,new Promise(E=>{Promise.all(d.current[i].map(([y,x])=>x)).then(()=>E())})]),i==="enter"?f.current=f.current.then(()=>t==null?void 0:t.wait.current).then(()=>b(i)):b(i)}),p=w((P,i,b)=>{Promise.all(d.current[i].splice(0).map(([E,y])=>y)).then(()=>{var E;(E=a.current.shift())==null||E()}).then(()=>b(i))});return l.useMemo(()=>({children:n,register:c,unregister:o,onStart:m,onStop:p,wait:f,chains:d}),[c,o,n,m,p,d,f])}function $t(){}let It=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function we(e){var t;let r={};for(let n of It)r[n]=(t=e[n])!=null?t:$t;return r}function Ct(e){let t=l.useRef(we(e));return l.useEffect(()=>{t.current=we(e)},[e]),t}let Lt="div",ke=Q.RenderStrategy;function Ot(e,t){let{beforeEnter:r,afterEnter:n,beforeLeave:s,afterLeave:u,enter:o,enterFrom:c,enterTo:a,entered:f,leave:d,leaveFrom:m,leaveTo:p,...P}=e,i=l.useRef(null),b=_(i,t),E=P.unmount?U.Unmount:U.Hidden,{show:y,appear:x,initial:A}=Tt(),[$,R]=l.useState(y?"visible":"hidden"),j=xt(),{register:S,unregister:I}=j,F=l.useRef(null);l.useEffect(()=>S(i),[S,i]),l.useEffect(()=>{if(E===U.Hidden&&i.current){if(y&&$!=="visible"){R("visible");return}return C($,{hidden:()=>I(i),visible:()=>S(i)})}},[$,i,S,I,y,E]);let L=M({enter:K(o),enterFrom:K(c),enterTo:K(a),entered:K(f),leave:K(d),leaveFrom:K(m),leaveTo:K(p)}),h=Ct({beforeEnter:r,afterEnter:n,beforeLeave:s,afterLeave:u}),v=$e();l.useEffect(()=>{if(v&&$==="visible"&&i.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[i,$,v]);let g=A&&!x,k=(()=>!v||g||F.current===y?"idle":y?"enter":"leave")(),O=gt(0),z=w(q=>C(q,{enter:()=>{O.addFlag(N.Opening),h.current.beforeEnter()},leave:()=>{O.addFlag(N.Closing),h.current.beforeLeave()},idle:()=>{}})),se=w(q=>C(q,{enter:()=>{O.removeFlag(N.Opening),h.current.afterEnter()},leave:()=>{O.removeFlag(N.Closing),h.current.afterLeave()},idle:()=>{}})),D=Re(()=>{R("hidden"),I(i)},j);Ft({container:i,classes:L,direction:k,onStart:M(q=>{D.onStart(i,q,z)}),onStop:M(q=>{D.onStop(i,q,se),q==="leave"&&!ie(D)&&(R("hidden"),I(i))})}),l.useEffect(()=>{g&&(E===U.Hidden?F.current=null:F.current=y)},[y,g,$]);let ce=P,Me={ref:b};return x&&y&&He.isServer&&(ce={...ce,className:Ge(P.className,...L.current.enter,...L.current.enterFrom)}),T.createElement(ae.Provider,{value:D},T.createElement(Te,{value:C($,{visible:N.Open,hidden:N.Closed})|O.flags},W({ourProps:Me,theirProps:ce,defaultTag:Lt,features:ke,visible:$==="visible",name:"Transition.Child"})))}function Nt(e,t){let{show:r,appear:n=!1,unmount:s,...u}=e,o=l.useRef(null),c=_(o,t);$e();let a=re();if(r===void 0&&a!==null&&(r=(a&N.Open)===N.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,d]=l.useState(r?"visible":"hidden"),m=Re(()=>{d("hidden")}),[p,P]=l.useState(!0),i=l.useRef([r]);te(()=>{p!==!1&&i.current[i.current.length-1]!==r&&(i.current.push(r),P(!1))},[i,r]);let b=l.useMemo(()=>({show:r,appear:n,initial:p}),[r,n,p]);l.useEffect(()=>{if(r)d("visible");else if(!ie(m))d("hidden");else{let y=o.current;if(!y)return;let x=y.getBoundingClientRect();x.x===0&&x.y===0&&x.width===0&&x.height===0&&d("hidden")}},[r,m]);let E={unmount:s};return T.createElement(ae.Provider,{value:m},T.createElement(ue.Provider,{value:b},W({ourProps:{...E,as:l.Fragment,children:T.createElement(Ae,{ref:c,...E,...u})},theirProps:{},defaultTag:l.Fragment,features:ke,visible:f==="visible",name:"Transition"})))}function Rt(e,t){let r=l.useContext(ue)!==null,n=re()!==null;return T.createElement(T.Fragment,null,!r&&n?T.createElement(be,{ref:t,...e}):T.createElement(Ae,{ref:t,...e}))}let be=G(Nt),Ae=G(Ot),kt=G(Rt),Bt=Object.assign(be,{Child:kt,Root:be});export{Dt as L,Bt as t};
