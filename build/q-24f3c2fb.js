import{r as l,i as E}from"./q-649551cb.js";import{l as _,u as C,s as R,S as de,D as J,y as Y,j as w,f as Z,o as x,g as fe,c as me,d as $,X as ee,C as te}from"./q-ac071a78.js";function ve(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function P(){let t=[],e={addEventListener(r,n,u,d){return r.addEventListener(n,u,d),e.add(()=>r.removeEventListener(n,u,d))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return e.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return e.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return ve(()=>{n.current&&r[0]()}),e.add(()=>{n.current=!1})},style(r,n,u){let d=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:u}),this.add(()=>{Object.assign(r.style,{[n]:d})})},group(r){let n=P();return r(n),this.add(()=>n.dispose())},add(r){return t.push(r),()=>{let n=t.indexOf(r);if(n>=0)for(let u of t.splice(n,1))u()}},dispose(){for(let r of t.splice(0))r()}};return e}function re(){let[t]=l.useState(P);return l.useEffect(()=>()=>t.dispose(),[t]),t}function K(){let t=l.useRef(!1);return _(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function pe(t=0){let[e,r]=l.useState(t),n=K(),u=l.useCallback(s=>{n.current&&r(a=>a|s)},[e,n]),d=l.useCallback(s=>!!(e&s),[e]),m=l.useCallback(s=>{n.current&&r(a=>a&~s)},[r,n]),f=l.useCallback(s=>{n.current&&r(a=>a^s)},[r]);return{flags:e,addFlag:u,hasFlag:d,removeFlag:m,toggleFlag:f}}function he(t){let e={called:!1};return(...r)=>{if(!e.called)return e.called=!0,t(...r)}}function z(t,...e){t&&e.length>0&&t.classList.add(...e)}function G(t,...e){t&&e.length>0&&t.classList.remove(...e)}function ge(t,e){let r=P();if(!t)return r.dispose;let{transitionDuration:n,transitionDelay:u}=getComputedStyle(t),[d,m]=[n,u].map(s=>{let[a=0]=s.split(",").filter(Boolean).map(c=>c.includes("ms")?parseFloat(c):parseFloat(c)*1e3).sort((c,g)=>g-c);return a}),f=d+m;if(f!==0){r.group(a=>{a.setTimeout(()=>{e(),a.dispose()},f),a.addEventListener(t,"transitionrun",c=>{c.target===c.currentTarget&&a.dispose()})});let s=r.addEventListener(t,"transitionend",a=>{a.target===a.currentTarget&&(e(),s())})}else e();return r.add(()=>e()),r.dispose}function be(t,e,r,n){let u=r?"enter":"leave",d=P(),m=n!==void 0?he(n):()=>{};u==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let f=C(u,{enter:()=>e.enter,leave:()=>e.leave}),s=C(u,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),a=C(u,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return G(t,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),z(t,...f,...a),d.nextFrame(()=>{G(t,...a),z(t,...s),ge(t,()=>(G(t,...f),z(t,...e.entered),m()))}),d.dispose}function Ee({container:t,direction:e,classes:r,onStart:n,onStop:u}){let d=K(),m=re(),f=R(e);_(()=>{let s=P();m.add(s.dispose);let a=t.current;if(a&&f.current!=="idle"&&d.current)return s.dispose(),n.current(f.current),s.add(be(a,r.current,f.current==="enter",()=>{s.dispose(),u.current(f.current)})),s.dispose},[e])}function S(t=""){return t.split(" ").filter(e=>e.trim().length>1)}let D=l.createContext(null);D.displayName="TransitionContext";var Te=(t=>(t.Visible="visible",t.Hidden="hidden",t))(Te||{});function Fe(){let t=l.useContext(D);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function ye(){let t=l.useContext(H);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let H=l.createContext(null);H.displayName="NestingContext";function q(t){return"children"in t?q(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function ne(t,e){let r=R(t),n=l.useRef([]),u=K(),d=re(),m=x((v,i=w.Hidden)=>{let p=n.current.findIndex(({el:o})=>o===v);p!==-1&&(C(i,{[w.Unmount](){n.current.splice(p,1)},[w.Hidden](){n.current[p].state="hidden"}}),d.microTask(()=>{var o;!q(n)&&u.current&&((o=r.current)==null||o.call(r))}))}),f=x(v=>{let i=n.current.find(({el:p})=>p===v);return i?i.state!=="visible"&&(i.state="visible"):n.current.push({el:v,state:"visible"}),()=>m(v,w.Unmount)}),s=l.useRef([]),a=l.useRef(Promise.resolve()),c=l.useRef({enter:[],leave:[],idle:[]}),g=x((v,i,p)=>{s.current.splice(0),e&&(e.chains.current[i]=e.chains.current[i].filter(([o])=>o!==v)),e==null||e.chains.current[i].push([v,new Promise(o=>{s.current.push(o)})]),e==null||e.chains.current[i].push([v,new Promise(o=>{Promise.all(c.current[i].map(([h,b])=>b)).then(()=>o())})]),i==="enter"?a.current=a.current.then(()=>e==null?void 0:e.wait.current).then(()=>p(i)):p(i)}),T=x((v,i,p)=>{Promise.all(c.current[i].splice(0).map(([o,h])=>h)).then(()=>{var o;(o=s.current.shift())==null||o()}).then(()=>p(i))});return l.useMemo(()=>({children:n,register:f,unregister:m,onStart:g,onStop:T,wait:a,chains:c}),[f,m,n,g,T,c,a])}function $e(){}let Ce=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function W(t){var e;let r={};for(let n of Ce)r[n]=(e=t[n])!=null?e:$e;return r}function we(t){let e=l.useRef(W(t));return l.useEffect(()=>{e.current=W(t)},[t]),e}let Se="div",ie=de.RenderStrategy;function xe(t,e){let{beforeEnter:r,afterEnter:n,beforeLeave:u,afterLeave:d,enter:m,enterFrom:f,enterTo:s,entered:a,leave:c,leaveFrom:g,leaveTo:T,...v}=t,i=l.useRef(null),p=Y(i,e),o=v.unmount?w.Unmount:w.Hidden,{show:h,appear:b,initial:ae}=Fe(),[F,M]=l.useState(h?"visible":"hidden"),Q=ye(),{register:O,unregister:A}=Q,j=l.useRef(null);l.useEffect(()=>O(i),[O,i]),l.useEffect(()=>{if(o===w.Hidden&&i.current){if(h&&F!=="visible"){M("visible");return}return C(F,{hidden:()=>A(i),visible:()=>O(i)})}},[F,i,O,A,h,o]);let B=R({enter:S(m),enterFrom:S(f),enterTo:S(s),entered:S(a),leave:S(c),leaveFrom:S(g),leaveTo:S(T)}),k=we({beforeEnter:r,afterEnter:n,beforeLeave:u,afterLeave:d}),U=Z();l.useEffect(()=>{if(U&&F==="visible"&&i.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[i,F,U]);let I=ae&&!b,se=(()=>!U||I||j.current===h?"idle":h?"enter":"leave")(),L=pe(0),ue=x(y=>C(y,{enter:()=>{L.addFlag($.Opening),k.current.beforeEnter()},leave:()=>{L.addFlag($.Closing),k.current.beforeLeave()},idle:()=>{}})),oe=x(y=>C(y,{enter:()=>{L.removeFlag($.Opening),k.current.afterEnter()},leave:()=>{L.removeFlag($.Closing),k.current.afterLeave()},idle:()=>{}})),N=ne(()=>{M("hidden"),A(i)},Q);Ee({container:i,classes:B,direction:se,onStart:R(y=>{N.onStart(i,y,ue)}),onStop:R(y=>{N.onStop(i,y,oe),y==="leave"&&!q(N)&&(M("hidden"),A(i))})}),l.useEffect(()=>{I&&(o===w.Hidden?j.current=null:j.current=h)},[h,I,F]);let V=v,ce={ref:p};return b&&h&&(V={...V,className:fe(v.className,...B.current.enter,...B.current.enterFrom)}),E.createElement(H.Provider,{value:N},E.createElement(me,{value:C(F,{visible:$.Open,hidden:$.Closed})|L.flags},ee({ourProps:ce,theirProps:V,defaultTag:Se,features:ie,visible:F==="visible",name:"Transition.Child"})))}function Le(t,e){let{show:r,appear:n=!1,unmount:u,...d}=t,m=l.useRef(null),f=Y(m,e);Z();let s=te();if(r===void 0&&s!==null&&(r=(s&$.Open)===$.Open),![!0,!1].includes(r))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[a,c]=l.useState(r?"visible":"hidden"),g=ne(()=>{c("hidden")}),[T,v]=l.useState(!0),i=l.useRef([r]);_(()=>{T!==!1&&i.current[i.current.length-1]!==r&&(i.current.push(r),v(!1))},[i,r]);let p=l.useMemo(()=>({show:r,appear:n,initial:T}),[r,n,T]);l.useEffect(()=>{if(r)c("visible");else if(!q(g))c("hidden");else{let h=m.current;if(!h)return;let b=h.getBoundingClientRect();b.x===0&&b.y===0&&b.width===0&&b.height===0&&c("hidden")}},[r,g]);let o={unmount:u};return E.createElement(H.Provider,{value:g},E.createElement(D.Provider,{value:p},ee({ourProps:{...o,as:l.Fragment,children:E.createElement(le,{ref:f,...o,...d})},theirProps:{},defaultTag:l.Fragment,features:ie,visible:a==="visible",name:"Transition"})))}function Re(t,e){let r=l.useContext(D)!==null,n=te()!==null;return E.createElement(E.Fragment,null,!r&&n?E.createElement(X,{ref:e,...t}):E.createElement(le,{ref:e,...t}))}let X=J(Le),le=J(xe),Pe=J(Re),ke=Object.assign(X,{Child:Pe,Root:X});export{ke as t};
