import{r as a,i as $}from"./q-649551cb.js";import{e as re,u as A,s as U,D as _,X as j,S as q,y as K,T as be,o as g,c as Pe,d as H,I as G,a as Ee,C as ce,l as ye,b as D,r as de}from"./q-ac071a78.js";let te=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var k=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(k||{}),J=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(J||{}),Se=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(Se||{});function Y(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(te)).sort((n,o)=>Math.sign((n.tabIndex||Number.MAX_SAFE_INTEGER)-(o.tabIndex||Number.MAX_SAFE_INTEGER)))}var oe=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(oe||{});function pe(e,n=0){var o;return e===((o=re(e))==null?void 0:o.body)?!1:A(n,{[0](){return e.matches(te)},[1](){let u=e;for(;u!==null;){if(u.matches(te))return!0;u=u.parentElement}return!1}})}var he=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(he||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let we=["textarea","input"].join(",");function ge(e){var n,o;return(o=(n=e==null?void 0:e.matches)==null?void 0:n.call(e,we))!=null?o:!1}function Fe(e,n=o=>o){return e.slice().sort((o,u)=>{let d=n(o),r=n(u);if(d===null||r===null)return 0;let t=d.compareDocumentPosition(r);return t&Node.DOCUMENT_POSITION_FOLLOWING?-1:t&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function R(e,n,{sorted:o=!0,relativeTo:u=null,skipElements:d=[]}={}){let r=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,t=Array.isArray(e)?o?Fe(e):e:Y(e);d.length>0&&t.length>1&&(t=t.filter(w=>!d.includes(w))),u=u??r.activeElement;let m=(()=>{if(n&5)return 1;if(n&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),i=(()=>{if(n&1)return 0;if(n&2)return Math.max(0,t.indexOf(u))-1;if(n&4)return Math.max(0,t.indexOf(u))+1;if(n&8)return t.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),y=n&32?{preventScroll:!0}:{},f=0,p=t.length,s;do{if(f>=p||f+p<=0)return 0;let w=i+f;if(n&16)w=(w+p)%p;else{if(w<0)return 3;if(w>=p)return 1}s=t[w],s==null||s.focus(y),f+=m}while(s!==r.activeElement);return n&6&&ge(s)&&s.select(),2}function ee(e,n,o){let u=U(n);a.useEffect(()=>{function d(r){u.current(r)}return document.addEventListener(e,d,o),()=>document.removeEventListener(e,d,o)},[e,o])}function Ie(e,n,o=!0){let u=a.useRef(!1);a.useEffect(()=>{requestAnimationFrame(()=>{u.current=o})},[o]);function d(t,m){if(!u.current||t.defaultPrevented)return;let i=function f(p){return typeof p=="function"?f(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e),y=m(t);if(y!==null&&y.getRootNode().contains(y)){for(let f of i){if(f===null)continue;let p=f instanceof HTMLElement?f:f.current;if(p!=null&&p.contains(y)||t.composed&&t.composedPath().includes(p))return}return!pe(y,oe.Loose)&&y.tabIndex!==-1&&t.preventDefault(),n(t,y)}}let r=a.useRef(null);ee("mousedown",t=>{var m,i;u.current&&(r.current=((i=(m=t.composedPath)==null?void 0:m.call(t))==null?void 0:i[0])||t.target)},!0),ee("click",t=>{r.current&&(d(t,()=>r.current),r.current=null)},!0),ee("blur",t=>d(t,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}let xe="div";var Q=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(Q||{});function $e(e,n){let{features:o=1,...u}=e,d={ref:n,"aria-hidden":(o&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(o&4)===4&&(o&2)!==2&&{display:"none"}}};return j({ourProps:d,theirProps:u,slot:{},defaultTag:xe,name:"Hidden"})}let ne=_($e);function Te(e,n,o){let u=U(n);a.useEffect(()=>{function d(r){u.current(r)}return window.addEventListener(e,d,o),()=>window.removeEventListener(e,d,o)},[e,o])}var C=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(C||{});function fe(){let e=a.useRef(0);return Te("keydown",n=>{n.key==="Tab"&&(e.current=n.shiftKey?1:0)},!0),e}function ue(...e){return a.useMemo(()=>re(...e),[...e])}function Oe(e,n,o,u){let d=U(o);a.useEffect(()=>{e=e??window;function r(t){d.current(t)}return e.addEventListener(n,r,u),()=>e.removeEventListener(n,r,u)},[e,n,u])}var Ne=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Ne||{}),Me=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Me||{});let Le={[0]:e=>({...e,popoverState:A(e.popoverState,{[0]:1,[1]:0})}),[1](e){return e.popoverState===1?e:{...e,popoverState:1}},[2](e,n){return e.button===n.button?e:{...e,button:n.button}},[3](e,n){return e.buttonId===n.buttonId?e:{...e,buttonId:n.buttonId}},[4](e,n){return e.panel===n.panel?e:{...e,panel:n.panel}},[5](e,n){return e.panelId===n.panelId?e:{...e,panelId:n.panelId}}},le=a.createContext(null);le.displayName="PopoverContext";function Z(e){let n=a.useContext(le);if(n===null){let o=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,Z),o}return n}let ae=a.createContext(null);ae.displayName="PopoverAPIContext";function ie(e){let n=a.useContext(ae);if(n===null){let o=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,ie),o}return n}let se=a.createContext(null);se.displayName="PopoverGroupContext";function ve(){return a.useContext(se)}let z=a.createContext(null);z.displayName="PopoverPanelContext";function ke(){return a.useContext(z)}function Ce(e,n){return A(n.type,Le,e,n)}let Be="div";function Ae(e,n){var o;let u=a.useRef(null),d=K(n,be(l=>{u.current=l})),r=a.useRef([]),t=a.useReducer(Ce,{popoverState:1,buttons:r,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:a.createRef(),afterPanelSentinel:a.createRef()}),[{popoverState:m,button:i,buttonId:y,panel:f,panelId:p,beforePanelSentinel:s,afterPanelSentinel:w},E]=t,P=ue((o=u.current)!=null?o:i),h=a.useMemo(()=>{if(!i||!f)return!1;for(let X of document.querySelectorAll("body > *"))if(Number(X==null?void 0:X.contains(i))^Number(X==null?void 0:X.contains(f)))return!0;let l=Y(),v=l.indexOf(i),x=(v+l.length-1)%l.length,B=(v+1)%l.length,V=l[x],me=l[B];return!f.contains(V)&&!f.contains(me)},[i,f]),F=U(y),N=U(p),T=a.useMemo(()=>({buttonId:F,panelId:N,close:()=>E({type:1})}),[F,N,E]),M=ve(),L=M==null?void 0:M.registerPopover,W=g(()=>{var l;return(l=M==null?void 0:M.isFocusWithinPopoverGroup())!=null?l:(P==null?void 0:P.activeElement)&&((i==null?void 0:i.contains(P.activeElement))||(f==null?void 0:f.contains(P.activeElement)))});a.useEffect(()=>L==null?void 0:L(T),[L,T]),Oe(P==null?void 0:P.defaultView,"focus",l=>{var v,x,B,V;m===0&&(W()||i&&f&&l.target!==window&&((x=(v=s.current)==null?void 0:v.contains)!=null&&x.call(v,l.target)||(V=(B=w.current)==null?void 0:B.contains)!=null&&V.call(B,l.target)||E({type:1})))},!0),Ie([i,f],(l,v)=>{E({type:1}),pe(v,oe.Loose)||(l.preventDefault(),i==null||i.focus())},m===0);let b=g(l=>{E({type:1});let v=(()=>l?l instanceof HTMLElement?l:"current"in l&&l.current instanceof HTMLElement?l.current:i:i)();v==null||v.focus()}),I=a.useMemo(()=>({close:b,isPortalled:h}),[b,h]),S=a.useMemo(()=>({open:m===0,close:b}),[m,b]),O=e,c={ref:d};return $.createElement(z.Provider,{value:null},$.createElement(le.Provider,{value:t},$.createElement(ae.Provider,{value:I},$.createElement(Pe,{value:A(m,{[0]:H.Open,[1]:H.Closed})},j({ourProps:c,theirProps:O,slot:S,defaultTag:Be,name:"Popover"})))))}let De="button";function Re(e,n){let o=G(),{id:u=`headlessui-popover-button-${o}`,...d}=e,[r,t]=Z("Popover.Button"),{isPortalled:m}=ie("Popover.Button"),i=a.useRef(null),y=`headlessui-focus-sentinel-${G()}`,f=ve(),p=f==null?void 0:f.closeOthers,s=ke()!==null;a.useEffect(()=>{if(!s)return t({type:3,buttonId:u}),()=>{t({type:3,buttonId:null})}},[s,u,t]);let[w]=a.useState(()=>Symbol()),E=K(i,n,s?null:c=>{if(c)r.buttons.current.push(w);else{let l=r.buttons.current.indexOf(w);l!==-1&&r.buttons.current.splice(l,1)}r.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),c&&t({type:2,button:c})}),P=K(i,n),h=ue(i),F=g(c=>{var l,v,x;if(s){if(r.popoverState===1)return;switch(c.key){case D.Space:case D.Enter:c.preventDefault(),(v=(l=c.target).click)==null||v.call(l),t({type:1}),(x=r.button)==null||x.focus();break}}else switch(c.key){case D.Space:case D.Enter:c.preventDefault(),c.stopPropagation(),r.popoverState===1&&(p==null||p(r.buttonId)),t({type:0});break;case D.Escape:if(r.popoverState!==0)return p==null?void 0:p(r.buttonId);if(!i.current||h!=null&&h.activeElement&&!i.current.contains(h.activeElement))return;c.preventDefault(),c.stopPropagation(),t({type:1});break}}),N=g(c=>{s||c.key===D.Space&&c.preventDefault()}),T=g(c=>{var l,v;de(c.currentTarget)||e.disabled||(s?(t({type:1}),(l=r.button)==null||l.focus()):(c.preventDefault(),c.stopPropagation(),r.popoverState===1&&(p==null||p(r.buttonId)),t({type:0}),(v=r.button)==null||v.focus()))}),M=g(c=>{c.preventDefault(),c.stopPropagation()}),L=r.popoverState===0,W=a.useMemo(()=>({open:L}),[L]),b=Ee(e,i),I=s?{ref:P,type:b,onKeyDown:F,onClick:T}:{ref:E,id:r.buttonId,type:b,"aria-expanded":e.disabled?void 0:r.popoverState===0,"aria-controls":r.panel?r.panelId:void 0,onKeyDown:F,onKeyUp:N,onClick:T,onMouseDown:M},S=fe(),O=g(()=>{let c=r.panel;if(!c)return;function l(){A(S.current,{[C.Forwards]:()=>R(c,k.First),[C.Backwards]:()=>R(c,k.Last)})===J.Error&&R(Y().filter(v=>v.dataset.headlessuiFocusGuard!=="true"),A(S.current,{[C.Forwards]:k.Next,[C.Backwards]:k.Previous}),{relativeTo:r.button})}l()});return $.createElement($.Fragment,null,j({ourProps:I,theirProps:d,slot:W,defaultTag:De,name:"Popover.Button"}),L&&!s&&m&&$.createElement(ne,{id:y,features:Q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:O}))}let Ge="div",Ke=q.RenderStrategy|q.Static;function He(e,n){let o=G(),{id:u=`headlessui-popover-overlay-${o}`,...d}=e,[{popoverState:r},t]=Z("Popover.Overlay"),m=K(n),i=ce(),y=(()=>i!==null?(i&H.Open)===H.Open:r===0)(),f=g(s=>{if(de(s.currentTarget))return s.preventDefault();t({type:1})}),p=a.useMemo(()=>({open:r===0}),[r]);return j({ourProps:{ref:m,id:u,"aria-hidden":!0,onClick:f},theirProps:d,slot:p,defaultTag:Ge,features:Ke,visible:y,name:"Popover.Overlay"})}let _e="div",je=q.RenderStrategy|q.Static;function We(e,n){let o=G(),{id:u=`headlessui-popover-panel-${o}`,focus:d=!1,...r}=e,[t,m]=Z("Popover.Panel"),{close:i,isPortalled:y}=ie("Popover.Panel"),f=`headlessui-focus-sentinel-before-${G()}`,p=`headlessui-focus-sentinel-after-${G()}`,s=a.useRef(null),w=K(s,n,b=>{m({type:4,panel:b})}),E=ue(s);ye(()=>(m({type:5,panelId:u}),()=>{m({type:5,panelId:null})}),[u,m]);let P=ce(),h=(()=>P!==null?(P&H.Open)===H.Open:t.popoverState===0)(),F=g(b=>{var I;switch(b.key){case D.Escape:if(t.popoverState!==0||!s.current||E!=null&&E.activeElement&&!s.current.contains(E.activeElement))return;b.preventDefault(),b.stopPropagation(),m({type:1}),(I=t.button)==null||I.focus();break}});a.useEffect(()=>{var b;e.static||t.popoverState===1&&((b=e.unmount)==null||b)&&m({type:4,panel:null})},[t.popoverState,e.unmount,e.static,m]),a.useEffect(()=>{if(!d||t.popoverState!==0||!s.current)return;let b=E==null?void 0:E.activeElement;s.current.contains(b)||R(s.current,k.First)},[d,s,t.popoverState]);let N=a.useMemo(()=>({open:t.popoverState===0,close:i}),[t,i]),T={ref:w,id:u,onKeyDown:F,onBlur:d&&t.popoverState===0?b=>{var I,S,O,c,l;let v=b.relatedTarget;v&&s.current&&((I=s.current)!=null&&I.contains(v)||(m({type:1}),((O=(S=t.beforePanelSentinel.current)==null?void 0:S.contains)!=null&&O.call(S,v)||(l=(c=t.afterPanelSentinel.current)==null?void 0:c.contains)!=null&&l.call(c,v))&&v.focus({preventScroll:!0})))}:void 0,tabIndex:-1},M=fe(),L=g(()=>{let b=s.current;if(!b)return;function I(){A(M.current,{[C.Forwards]:()=>{var S;R(b,k.First)===J.Error&&((S=t.afterPanelSentinel.current)==null||S.focus())},[C.Backwards]:()=>{var S;(S=t.button)==null||S.focus({preventScroll:!0})}})}I()}),W=g(()=>{let b=s.current;if(!b)return;function I(){A(M.current,{[C.Forwards]:()=>{var S;if(!t.button)return;let O=Y(),c=O.indexOf(t.button),l=O.slice(0,c+1),v=[...O.slice(c+1),...l];for(let x of v.slice())if(x.dataset.headlessuiFocusGuard==="true"||(S=t.panel)!=null&&S.contains(x)){let B=v.indexOf(x);B!==-1&&v.splice(B,1)}R(v,k.First,{sorted:!1})},[C.Backwards]:()=>{var S;R(b,k.Previous)===J.Error&&((S=t.button)==null||S.focus())}})}I()});return $.createElement(z.Provider,{value:u},h&&y&&$.createElement(ne,{id:f,ref:t.beforePanelSentinel,features:Q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:L}),j({ourProps:T,theirProps:r,slot:N,defaultTag:_e,features:je,visible:h,name:"Popover.Panel"}),h&&y&&$.createElement(ne,{id:p,ref:t.afterPanelSentinel,features:Q.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:W}))}let Ue="div";function Ve(e,n){let o=a.useRef(null),u=K(o,n),[d,r]=a.useState([]),t=g(E=>{r(P=>{let h=P.indexOf(E);if(h!==-1){let F=P.slice();return F.splice(h,1),F}return P})}),m=g(E=>(r(P=>[...P,E]),()=>t(E))),i=g(()=>{var E;let P=re(o);if(!P)return!1;let h=P.activeElement;return(E=o.current)!=null&&E.contains(h)?!0:d.some(F=>{var N,T;return((N=P.getElementById(F.buttonId.current))==null?void 0:N.contains(h))||((T=P.getElementById(F.panelId.current))==null?void 0:T.contains(h))})}),y=g(E=>{for(let P of d)P.buttonId.current!==E&&P.close()}),f=a.useMemo(()=>({registerPopover:m,unregisterPopover:t,isFocusWithinPopoverGroup:i,closeOthers:y}),[m,t,i,y]),p=a.useMemo(()=>({}),[]),s=e,w={ref:u};return $.createElement(se.Provider,{value:f},j({ourProps:w,theirProps:s,slot:p,defaultTag:Ue,name:"Popover.Group"}))}let Xe=_(Ae),qe=_(Re),Je=_(He),Qe=_(We),Ye=_(Ve),et=Object.assign(Xe,{Button:qe,Overlay:Je,Panel:Qe,Group:Ye});export{et as L};
