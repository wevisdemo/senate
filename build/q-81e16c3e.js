import{r as l,d as T}from"./q-fc58cff2.js";import{e as he,u as C,s as A,D as G,X as _,l as te,S as Q,y as U,T as De,o as w,c as $e,d as N,I as J,a as Be,C as ne,b as W,r as xe,j as q,f as Ie,g as He}from"./q-5757861a.js";function Ge(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Y(){let e=[],t={addEventListener(n,r,s,u){return n.addEventListener(r,s,u),t.add(()=>n.removeEventListener(r,s,u))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return t.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return t.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ge(()=>{r.current&&n[0]()}),t.add(()=>{r.current=!1})},style(n,r,s){let u=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:u})})},group(n){let r=Y();return n(r),this.add(()=>r.dispose())},add(n){return e.push(n),()=>{let r=e.indexOf(n);if(r>=0)for(let s of e.splice(r,1))s()}},dispose(){for(let n of e.splice(0))n()}};return t}function Ce(){let[e]=l.useState(Y);return l.useEffect(()=>()=>e.dispose(),[e]),e}let ve=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var B=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(B||{}),Z=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Z||{}),je=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(je||{});function re(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(ve)).sort((t,n)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Ee=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(Ee||{});function Le(e,t=0){var n;return e===((n=he(e))==null?void 0:n.body)?!1:C(t,{[0](){return e.matches(ve)},[1](){let r=e;for(;r!==null;){if(r.matches(ve))return!0;r=r.parentElement}return!1}})}var Ke=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(Ke||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let qe=["textarea","input"].join(",");function Ue(e){var t,n;return(n=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,qe))!=null?n:!1}function _e(e,t=n=>n){return e.slice().sort((n,r)=>{let s=t(n),u=t(r);if(s===null||u===null)return 0;let o=s.compareDocumentPosition(u);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function X(e,t,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let u=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:e.ownerDocument,o=Array.isArray(e)?n?_e(e):e:re(e);s.length>0&&o.length>1&&(o=o.filter(P=>!s.includes(P))),r=r??u.activeElement;let f=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(r))-1;if(t&4)return Math.max(0,o.indexOf(r))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=t&32?{preventScroll:!0}:{},d=0,m=o.length,p;do{if(d>=m||d+m<=0)return 0;let P=a+d;if(t&16)P=(P+m)%m;else{if(P<0)return 3;if(P>=m)return 1}p=o[P],p==null||p.focus(c),d+=f}while(p!==u.activeElement);return t&6&&Ue(p)&&p.select(),2}function de(e,t,n){let r=A(t);l.useEffect(()=>{function s(u){r.current(u)}return document.addEventListener(e,s,n),()=>document.removeEventListener(e,s,n)},[e,n])}function Ve(e,t,n=!0){let r=l.useRef(!1);l.useEffect(()=>{requestAnimationFrame(()=>{r.current=n})},[n]);function s(o,f){if(!r.current||o.defaultPrevented)return;let a=function d(m){return typeof m=="function"?d(m()):Array.isArray(m)||m instanceof Set?m:[m]}(e),c=f(o);if(c!==null&&c.getRootNode().contains(c)){for(let d of a){if(d===null)continue;let m=d instanceof HTMLElement?d:d.current;if(m!=null&&m.contains(c)||o.composed&&o.composedPath().includes(m))return}return!Le(c,Ee.Loose)&&c.tabIndex!==-1&&o.preventDefault(),t(o,c)}}let u=l.useRef(null);de("mousedown",o=>{var f,a;r.current&&(u.current=((a=(f=o.composedPath)==null?void 0:f.call(o))==null?void 0:a[0])||o.target)},!0),de("click",o=>{u.current&&(s(o,()=>u.current),u.current=null)},!0),de("blur",o=>s(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}let We="div";var ee=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ee||{});function Xe(e,t){let{features:n=1,...r}=e,s={ref:t,"aria-hidden":(n&2)===2?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return _({ourProps:s,theirProps:r,slot:{},defaultTag:We,name:"Hidden"})}let me=G(Xe);function ze(e,t,n){let r=A(t);l.useEffect(()=>{function s(u){r.current(u)}return window.addEventListener(e,s,n),()=>window.removeEventListener(e,s,n)},[e,n])}var H=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(H||{});function Oe(){let e=l.useRef(0);return ze("keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function ge(){let e=l.useRef(!1);return te(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function Pe(...e){return l.useMemo(()=>he(...e),[...e])}function Je(e,t,n,r){let s=A(n);l.useEffect(()=>{e=e??window;function u(o){s.current(o)}return e.addEventListener(t,u,r),()=>e.removeEventListener(t,u,r)},[e,t,r])}var Qe=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Qe||{}),Ye=(e=>(e[e.TogglePopover=0]="TogglePopover",e[e.ClosePopover=1]="ClosePopover",e[e.SetButton=2]="SetButton",e[e.SetButtonId=3]="SetButtonId",e[e.SetPanel=4]="SetPanel",e[e.SetPanelId=5]="SetPanelId",e))(Ye||{});let Ze={[0]:e=>({...e,popoverState:C(e.popoverState,{[0]:1,[1]:0})}),[1](e){return e.popoverState===1?e:{...e,popoverState:1}},[2](e,t){return e.button===t.button?e:{...e,button:t.button}},[3](e,t){return e.buttonId===t.buttonId?e:{...e,buttonId:t.buttonId}},[4](e,t){return e.panel===t.panel?e:{...e,panel:t.panel}},[5](e,t){return e.panelId===t.panelId?e:{...e,panelId:t.panelId}}},ye=l.createContext(null);ye.displayName="PopoverContext";function oe(e){let t=l.useContext(ye);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,oe),n}return t}let Se=l.createContext(null);Se.displayName="PopoverAPIContext";function Fe(e){let t=l.useContext(Se);if(t===null){let n=new Error(`<${e} /> is missing a parent <Popover /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Fe),n}return t}let we=l.createContext(null);we.displayName="PopoverGroupContext";function Ne(){return l.useContext(we)}let le=l.createContext(null);le.displayName="PopoverPanelContext";function et(){return l.useContext(le)}function tt(e,t){return C(t.type,Ze,e,t)}let nt="div";function rt(e,t){var n;let r=l.useRef(null),s=U(t,De(v=>{r.current=v})),u=l.useRef([]),o=l.useReducer(tt,{popoverState:1,buttons:u,button:null,buttonId:null,panel:null,panelId:null,beforePanelSentinel:l.createRef(),afterPanelSentinel:l.createRef()}),[{popoverState:f,button:a,buttonId:c,panel:d,panelId:m,beforePanelSentinel:p,afterPanelSentinel:P},i]=o,b=Pe((n=r.current)!=null?n:a),E=l.useMemo(()=>{if(!a||!d)return!1;for(let D of document.querySelectorAll("body > *"))if(Number(D==null?void 0:D.contains(a))^Number(D==null?void 0:D.contains(d)))return!0;let v=re(),g=v.indexOf(a),R=(g+v.length-1)%v.length,O=(g+1)%v.length,z=v[R],se=v[O];return!d.contains(z)&&!d.contains(se)},[a,d]),S=A(c),$=A(m),M=l.useMemo(()=>({buttonId:S,panelId:$,close:()=>i({type:1})}),[S,$,i]),x=Ne(),k=x==null?void 0:x.registerPopover,j=w(()=>{var v;return(v=x==null?void 0:x.isFocusWithinPopoverGroup())!=null?v:(b==null?void 0:b.activeElement)&&((a==null?void 0:a.contains(b.activeElement))||(d==null?void 0:d.contains(b.activeElement)))});l.useEffect(()=>k==null?void 0:k(M),[k,M]),Je(b==null?void 0:b.defaultView,"focus",v=>{var g,R,O,z;f===0&&(j()||a&&d&&v.target!==window&&((R=(g=p.current)==null?void 0:g.contains)!=null&&R.call(g,v.target)||(z=(O=P.current)==null?void 0:O.contains)!=null&&z.call(O,v.target)||i({type:1})))},!0),Ve([a,d],(v,g)=>{i({type:1}),Le(g,Ee.Loose)||(v.preventDefault(),a==null||a.focus())},f===0);let y=w(v=>{i({type:1});let g=(()=>v?v instanceof HTMLElement?v:"current"in v&&v.current instanceof HTMLElement?v.current:a:a)();g==null||g.focus()}),I=l.useMemo(()=>({close:y,isPortalled:E}),[y,E]),F=l.useMemo(()=>({open:f===0,close:y}),[f,y]),L=e,h={ref:s};return T.createElement(le.Provider,{value:null},T.createElement(ye.Provider,{value:o},T.createElement(Se.Provider,{value:I},T.createElement($e,{value:C(f,{[0]:N.Open,[1]:N.Closed})},_({ourProps:h,theirProps:L,slot:F,defaultTag:nt,name:"Popover"})))))}let ot="button";function lt(e,t){let n=J(),{id:r=`headlessui-popover-button-${n}`,...s}=e,[u,o]=oe("Popover.Button"),{isPortalled:f}=Fe("Popover.Button"),a=l.useRef(null),c=`headlessui-focus-sentinel-${J()}`,d=Ne(),m=d==null?void 0:d.closeOthers,p=et()!==null;l.useEffect(()=>{if(!p)return o({type:3,buttonId:r}),()=>{o({type:3,buttonId:null})}},[p,r,o]);let[P]=l.useState(()=>Symbol()),i=U(a,t,p?null:h=>{if(h)u.buttons.current.push(P);else{let v=u.buttons.current.indexOf(P);v!==-1&&u.buttons.current.splice(v,1)}u.buttons.current.length>1&&console.warn("You are already using a <Popover.Button /> but only 1 <Popover.Button /> is supported."),h&&o({type:2,button:h})}),b=U(a,t),E=Pe(a),S=w(h=>{var v,g,R;if(p){if(u.popoverState===1)return;switch(h.key){case W.Space:case W.Enter:h.preventDefault(),(g=(v=h.target).click)==null||g.call(v),o({type:1}),(R=u.button)==null||R.focus();break}}else switch(h.key){case W.Space:case W.Enter:h.preventDefault(),h.stopPropagation(),u.popoverState===1&&(m==null||m(u.buttonId)),o({type:0});break;case W.Escape:if(u.popoverState!==0)return m==null?void 0:m(u.buttonId);if(!a.current||E!=null&&E.activeElement&&!a.current.contains(E.activeElement))return;h.preventDefault(),h.stopPropagation(),o({type:1});break}}),$=w(h=>{p||h.key===W.Space&&h.preventDefault()}),M=w(h=>{var v,g;xe(h.currentTarget)||e.disabled||(p?(o({type:1}),(v=u.button)==null||v.focus()):(h.preventDefault(),h.stopPropagation(),u.popoverState===1&&(m==null||m(u.buttonId)),o({type:0}),(g=u.button)==null||g.focus()))}),x=w(h=>{h.preventDefault(),h.stopPropagation()}),k=u.popoverState===0,j=l.useMemo(()=>({open:k}),[k]),y=Be(e,a),I=p?{ref:b,type:y,onKeyDown:S,onClick:M}:{ref:i,id:u.buttonId,type:y,"aria-expanded":e.disabled?void 0:u.popoverState===0,"aria-controls":u.panel?u.panelId:void 0,onKeyDown:S,onKeyUp:$,onClick:M,onMouseDown:x},F=Oe(),L=w(()=>{let h=u.panel;if(!h)return;function v(){C(F.current,{[H.Forwards]:()=>X(h,B.First),[H.Backwards]:()=>X(h,B.Last)})===Z.Error&&X(re().filter(g=>g.dataset.headlessuiFocusGuard!=="true"),C(F.current,{[H.Forwards]:B.Next,[H.Backwards]:B.Previous}),{relativeTo:u.button})}v()});return T.createElement(T.Fragment,null,_({ourProps:I,theirProps:s,slot:j,defaultTag:ot,name:"Popover.Button"}),k&&!p&&f&&T.createElement(me,{id:c,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:L}))}let ut="div",at=Q.RenderStrategy|Q.Static;function it(e,t){let n=J(),{id:r=`headlessui-popover-overlay-${n}`,...s}=e,[{popoverState:u},o]=oe("Popover.Overlay"),f=U(t),a=ne(),c=(()=>a!==null?(a&N.Open)===N.Open:u===0)(),d=w(p=>{if(xe(p.currentTarget))return p.preventDefault();o({type:1})}),m=l.useMemo(()=>({open:u===0}),[u]);return _({ourProps:{ref:f,id:r,"aria-hidden":!0,onClick:d},theirProps:s,slot:m,defaultTag:ut,features:at,visible:c,name:"Popover.Overlay"})}let st="div",ct=Q.RenderStrategy|Q.Static;function dt(e,t){let n=J(),{id:r=`headlessui-popover-panel-${n}`,focus:s=!1,...u}=e,[o,f]=oe("Popover.Panel"),{close:a,isPortalled:c}=Fe("Popover.Panel"),d=`headlessui-focus-sentinel-before-${J()}`,m=`headlessui-focus-sentinel-after-${J()}`,p=l.useRef(null),P=U(p,t,y=>{f({type:4,panel:y})}),i=Pe(p);te(()=>(f({type:5,panelId:r}),()=>{f({type:5,panelId:null})}),[r,f]);let b=ne(),E=(()=>b!==null?(b&N.Open)===N.Open:o.popoverState===0)(),S=w(y=>{var I;switch(y.key){case W.Escape:if(o.popoverState!==0||!p.current||i!=null&&i.activeElement&&!p.current.contains(i.activeElement))return;y.preventDefault(),y.stopPropagation(),f({type:1}),(I=o.button)==null||I.focus();break}});l.useEffect(()=>{var y;e.static||o.popoverState===1&&((y=e.unmount)==null||y)&&f({type:4,panel:null})},[o.popoverState,e.unmount,e.static,f]),l.useEffect(()=>{if(!s||o.popoverState!==0||!p.current)return;let y=i==null?void 0:i.activeElement;p.current.contains(y)||X(p.current,B.First)},[s,p,o.popoverState]);let $=l.useMemo(()=>({open:o.popoverState===0,close:a}),[o,a]),M={ref:P,id:r,onKeyDown:S,onBlur:s&&o.popoverState===0?y=>{var I,F,L,h,v;let g=y.relatedTarget;g&&p.current&&((I=p.current)!=null&&I.contains(g)||(f({type:1}),((L=(F=o.beforePanelSentinel.current)==null?void 0:F.contains)!=null&&L.call(F,g)||(v=(h=o.afterPanelSentinel.current)==null?void 0:h.contains)!=null&&v.call(h,g))&&g.focus({preventScroll:!0})))}:void 0,tabIndex:-1},x=Oe(),k=w(()=>{let y=p.current;if(!y)return;function I(){C(x.current,{[H.Forwards]:()=>{var F;X(y,B.First)===Z.Error&&((F=o.afterPanelSentinel.current)==null||F.focus())},[H.Backwards]:()=>{var F;(F=o.button)==null||F.focus({preventScroll:!0})}})}I()}),j=w(()=>{let y=p.current;if(!y)return;function I(){C(x.current,{[H.Forwards]:()=>{var F;if(!o.button)return;let L=re(),h=L.indexOf(o.button),v=L.slice(0,h+1),g=[...L.slice(h+1),...v];for(let R of g.slice())if(R.dataset.headlessuiFocusGuard==="true"||(F=o.panel)!=null&&F.contains(R)){let O=g.indexOf(R);O!==-1&&g.splice(O,1)}X(g,B.First,{sorted:!1})},[H.Backwards]:()=>{var F;X(y,B.Previous)===Z.Error&&((F=o.button)==null||F.focus())}})}I()});return T.createElement(le.Provider,{value:r},E&&c&&T.createElement(me,{id:d,ref:o.beforePanelSentinel,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:k}),_({ourProps:M,theirProps:u,slot:$,defaultTag:st,features:ct,visible:E,name:"Popover.Panel"}),E&&c&&T.createElement(me,{id:m,ref:o.afterPanelSentinel,features:ee.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:j}))}let ft="div";function pt(e,t){let n=l.useRef(null),r=U(n,t),[s,u]=l.useState([]),o=w(i=>{u(b=>{let E=b.indexOf(i);if(E!==-1){let S=b.slice();return S.splice(E,1),S}return b})}),f=w(i=>(u(b=>[...b,i]),()=>o(i))),a=w(()=>{var i;let b=he(n);if(!b)return!1;let E=b.activeElement;return(i=n.current)!=null&&i.contains(E)?!0:s.some(S=>{var $,M;return(($=b.getElementById(S.buttonId.current))==null?void 0:$.contains(E))||((M=b.getElementById(S.panelId.current))==null?void 0:M.contains(E))})}),c=w(i=>{for(let b of s)b.buttonId.current!==i&&b.close()}),d=l.useMemo(()=>({registerPopover:f,unregisterPopover:o,isFocusWithinPopoverGroup:a,closeOthers:c}),[f,o,a,c]),m=l.useMemo(()=>({}),[]),p=e,P={ref:r};return T.createElement(we.Provider,{value:d},_({ourProps:P,theirProps:p,slot:m,defaultTag:ft,name:"Popover.Group"}))}let vt=G(rt),mt=G(lt),bt=G(it),ht=G(dt),Et=G(pt),Dt=Object.assign(vt,{Button:mt,Overlay:bt,Panel:ht,Group:Et});function gt(e=0){let[t,n]=l.useState(e),r=ge(),s=l.useCallback(a=>{r.current&&n(c=>c|a)},[t,r]),u=l.useCallback(a=>!!(t&a),[t]),o=l.useCallback(a=>{r.current&&n(c=>c&~a)},[n,r]),f=l.useCallback(a=>{r.current&&n(c=>c^a)},[n]);return{flags:t,addFlag:s,hasFlag:u,removeFlag:o,toggleFlag:f}}function Pt(e){let t={called:!1};return(...n)=>{if(!t.called)return t.called=!0,e(...n)}}function fe(e,...t){e&&t.length>0&&e.classList.add(...t)}function pe(e,...t){e&&t.length>0&&e.classList.remove(...t)}function yt(e,t){let n=Y();if(!e)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(e),[u,o]=[r,s].map(a=>{let[c=0]=a.split(",").filter(Boolean).map(d=>d.includes("ms")?parseFloat(d):parseFloat(d)*1e3).sort((d,m)=>m-d);return c}),f=u+o;if(f!==0){n.group(c=>{c.setTimeout(()=>{t(),c.dispose()},f),c.addEventListener(e,"transitionrun",d=>{d.target===d.currentTarget&&c.dispose()})});let a=n.addEventListener(e,"transitionend",c=>{c.target===c.currentTarget&&(t(),a())})}else t();return n.add(()=>t()),n.dispose}function St(e,t,n,r){let s=n?"enter":"leave",u=Y(),o=r!==void 0?Pt(r):()=>{};s==="enter"&&(e.removeAttribute("hidden"),e.style.display="");let f=C(s,{enter:()=>t.enter,leave:()=>t.leave}),a=C(s,{enter:()=>t.enterTo,leave:()=>t.leaveTo}),c=C(s,{enter:()=>t.enterFrom,leave:()=>t.leaveFrom});return pe(e,...t.enter,...t.enterTo,...t.enterFrom,...t.leave,...t.leaveFrom,...t.leaveTo,...t.entered),fe(e,...f,...c),u.nextFrame(()=>{pe(e,...c),fe(e,...a),yt(e,()=>(pe(e,...f),fe(e,...t.entered),o()))}),u.dispose}function Ft({container:e,direction:t,classes:n,onStart:r,onStop:s}){let u=ge(),o=Ce(),f=A(t);te(()=>{let a=Y();o.add(a.dispose);let c=e.current;if(c&&f.current!=="idle"&&u.current)return a.dispose(),r.current(f.current),a.add(St(c,n.current,f.current==="enter",()=>{a.dispose(),s.current(f.current)})),a.dispose},[t])}function V(e=""){return e.split(" ").filter(t=>t.trim().length>1)}let ue=l.createContext(null);ue.displayName="TransitionContext";var wt=(e=>(e.Visible="visible",e.Hidden="hidden",e))(wt||{});function Tt(){let e=l.useContext(ue);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function $t(){let e=l.useContext(ae);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let ae=l.createContext(null);ae.displayName="NestingContext";function ie(e){return"children"in e?ie(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function ke(e,t){let n=A(e),r=l.useRef([]),s=ge(),u=Ce(),o=w((P,i=q.Hidden)=>{let b=r.current.findIndex(({el:E})=>E===P);b!==-1&&(C(i,{[q.Unmount](){r.current.splice(b,1)},[q.Hidden](){r.current[b].state="hidden"}}),u.microTask(()=>{var E;!ie(r)&&s.current&&((E=n.current)==null||E.call(n))}))}),f=w(P=>{let i=r.current.find(({el:b})=>b===P);return i?i.state!=="visible"&&(i.state="visible"):r.current.push({el:P,state:"visible"}),()=>o(P,q.Unmount)}),a=l.useRef([]),c=l.useRef(Promise.resolve()),d=l.useRef({enter:[],leave:[],idle:[]}),m=w((P,i,b)=>{a.current.splice(0),t&&(t.chains.current[i]=t.chains.current[i].filter(([E])=>E!==P)),t==null||t.chains.current[i].push([P,new Promise(E=>{a.current.push(E)})]),t==null||t.chains.current[i].push([P,new Promise(E=>{Promise.all(d.current[i].map(([S,$])=>$)).then(()=>E())})]),i==="enter"?c.current=c.current.then(()=>t==null?void 0:t.wait.current).then(()=>b(i)):b(i)}),p=w((P,i,b)=>{Promise.all(d.current[i].splice(0).map(([E,S])=>S)).then(()=>{var E;(E=a.current.shift())==null||E()}).then(()=>b(i))});return l.useMemo(()=>({children:r,register:f,unregister:o,onStart:m,onStop:p,wait:c,chains:d}),[f,o,r,m,p,d,c])}function xt(){}let It=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function Te(e){var t;let n={};for(let r of It)n[r]=(t=e[r])!=null?t:xt;return n}function Ct(e){let t=l.useRef(Te(e));return l.useEffect(()=>{t.current=Te(e)},[e]),t}let Lt="div",Re=Q.RenderStrategy;function Ot(e,t){let{beforeEnter:n,afterEnter:r,beforeLeave:s,afterLeave:u,enter:o,enterFrom:f,enterTo:a,entered:c,leave:d,leaveFrom:m,leaveTo:p,...P}=e,i=l.useRef(null),b=U(i,t),E=P.unmount?q.Unmount:q.Hidden,{show:S,appear:$,initial:M}=Tt(),[x,k]=l.useState(S?"visible":"hidden"),j=$t(),{register:y,unregister:I}=j,F=l.useRef(null);l.useEffect(()=>y(i),[y,i]),l.useEffect(()=>{if(E===q.Hidden&&i.current){if(S&&x!=="visible"){k("visible");return}return C(x,{hidden:()=>I(i),visible:()=>y(i)})}},[x,i,y,I,S,E]);let L=A({enter:V(o),enterFrom:V(f),enterTo:V(a),entered:V(c),leave:V(d),leaveFrom:V(m),leaveTo:V(p)}),h=Ct({beforeEnter:n,afterEnter:r,beforeLeave:s,afterLeave:u}),v=Ie();l.useEffect(()=>{if(v&&x==="visible"&&i.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[i,x,v]);let g=M&&!$,R=(()=>!v||g||F.current===S?"idle":S?"enter":"leave")(),O=gt(0),z=w(K=>C(K,{enter:()=>{O.addFlag(N.Opening),h.current.beforeEnter()},leave:()=>{O.addFlag(N.Closing),h.current.beforeLeave()},idle:()=>{}})),se=w(K=>C(K,{enter:()=>{O.removeFlag(N.Opening),h.current.afterEnter()},leave:()=>{O.removeFlag(N.Closing),h.current.afterLeave()},idle:()=>{}})),D=ke(()=>{k("hidden"),I(i)},j);Ft({container:i,classes:L,direction:R,onStart:A(K=>{D.onStart(i,K,z)}),onStop:A(K=>{D.onStop(i,K,se),K==="leave"&&!ie(D)&&(k("hidden"),I(i))})}),l.useEffect(()=>{g&&(E===q.Hidden?F.current=null:F.current=S)},[S,g,x]);let ce=P,Ae={ref:b};return $&&S&&(ce={...ce,className:He(P.className,...L.current.enter,...L.current.enterFrom)}),T.createElement(ae.Provider,{value:D},T.createElement($e,{value:C(x,{visible:N.Open,hidden:N.Closed})|O.flags},_({ourProps:Ae,theirProps:ce,defaultTag:Lt,features:Re,visible:x==="visible",name:"Transition.Child"})))}function Nt(e,t){let{show:n,appear:r=!1,unmount:s,...u}=e,o=l.useRef(null),f=U(o,t);Ie();let a=ne();if(n===void 0&&a!==null&&(n=(a&N.Open)===N.Open),![!0,!1].includes(n))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[c,d]=l.useState(n?"visible":"hidden"),m=ke(()=>{d("hidden")}),[p,P]=l.useState(!0),i=l.useRef([n]);te(()=>{p!==!1&&i.current[i.current.length-1]!==n&&(i.current.push(n),P(!1))},[i,n]);let b=l.useMemo(()=>({show:n,appear:r,initial:p}),[n,r,p]);l.useEffect(()=>{if(n)d("visible");else if(!ie(m))d("hidden");else{let S=o.current;if(!S)return;let $=S.getBoundingClientRect();$.x===0&&$.y===0&&$.width===0&&$.height===0&&d("hidden")}},[n,m]);let E={unmount:s};return T.createElement(ae.Provider,{value:m},T.createElement(ue.Provider,{value:b},_({ourProps:{...E,as:l.Fragment,children:T.createElement(Me,{ref:f,...E,...u})},theirProps:{},defaultTag:l.Fragment,features:Re,visible:c==="visible",name:"Transition"})))}function kt(e,t){let n=l.useContext(ue)!==null,r=ne()!==null;return T.createElement(T.Fragment,null,!n&&r?T.createElement(be,{ref:t,...e}):T.createElement(Me,{ref:t,...e}))}let be=G(Nt),Me=G(Ot),Rt=G(kt),Bt=Object.assign(be,{Child:Rt,Root:be});export{Dt as L,Bt as t};
